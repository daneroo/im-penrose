function z(){function r(a,r,o,t){var y=s[a],n=s[o],e={x:(r+f[a])*s[a].x,y:(r+f[a])*s[a].y},x={x:(t+f[o])*s[o].x,y:(t+f[o])*s[o].y},i=-y.y/y.x,l=-i*e.y+e.x,c=-n.x/n.y,h=-c*x.x+x.y,u=(c*l+h)/(1-c*i),g=i*u+l;return{x:g,y:u}}function o(o,t,y,n){var e,x,i,c,u,g,v,X=Array(h),Y=r(o,t,y,n),b=[];for(c=0;h>c;c++)u=s[c],u.x||(g=u.y,u.y=u.x,u.x=g),i=-u.y/u.x,X[c]=l.floor((Y.x-i*Y.y)/(-i*u.y+u.x)-f[c]);for(e=t+1;e-->t-1;)for(x=n+1;x-->n-1;){for(X[o]=e,X[y]=x,v={x:0,y:0},c=h;c-->0;)v.x+=X[c]*s[c].x,v.y+=X[c]*s[c].y;b.push(v)}a.beginPath(),a.moveTo(b[0].x,b[0].y),[1,3,2].forEach(function(r){a.lineTo(b[r].x,b[r].y)}),a.globalAlpha=.4,a.fillStyle="#00"+(1+3*y).toString(16),a.fill()}a.restore(),X=b.clientWidth,Y=window.innerHeight-4,c.width=X,c.height=Y,a.translate(X/2,Y/2),a.scale(19,19),a.clearRect(-X,-Y,2*X,2*Y);var t,y,n,e,x,i,f=[],l=Math,h=(2&+new Date/3)+5,s=[];for(x=h;x-->0;)i=l.PI*(.5+2*x/h),s.push({x:-l.sin(i),y:l.cos(i)}),f.push(l.random());for(t=h;t-->0;)for(y=h;y-->0;)if(y-t)for(n=7;n-->-6;)for(e=7;e-->-6;)o(t,n,y,e)}b.style.margin=0,z(),setInterval(z,2e3);