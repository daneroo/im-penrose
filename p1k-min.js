b.style.margin=0,X=b.clientWidth,Y=window.innerHeight-4,c.width=X,c.height=Y,a.translate(X/2,Y/2),a.scale(20,-20),function(){function o(o,y,a,r){var x=h[o],n=h[a],f={x:(y+c[o])*h[o].x,y:(y+c[o])*h[o].y},i={x:(r+c[a])*h[a].x,y:(r+c[a])*h[a].y},t=-x.y/x.x,l=-t*f.y+f.x,e=-n.x/n.y,s=-e*i.x+i.y,u=(e*l+s)/(1-e*t),b=t*u+l;return{x:b,y:u}}function y(y,r,x,n){var f,i,t,u,b,g,A,d=Array(e),p=o(y,r,x,n),v=[];for(u=0;e>u;u++)b=h[u],b.x||(g=b.y,b.y=b.x,b.x=g),t=-b.y/b.x,d[u]=s.floor((p.x-t*p.y)/(-t*b.y+b.x)-c[u]);for(f=r+1;f-->r-1;)for(i=n+1;i-->n-1;){for(d[y]=f,d[x]=i,A={x:0,y:0},u=e;u-->0;)A.x+=d[u]*h[u].x,A.y+=d[u]*h[u].y;v.push(A)}a.beginPath(),a.moveTo(v[0].x,v[0].y),[1,3,2].forEach(function(o){a.lineTo(v[o].x,v[o].y)}),a.globalAlpha=.5,a.fillStyle=l[y%5],a.fill()}var r,x,n,f,i,t,l=["#b80","#D38","#77C","#3AA","#8A0"],e=5,h=[],c=[],s=Math;for(i=e;i-->0;)t=s.PI*(.5+2*i/e),h.push({x:-s.sin(t),y:s.cos(t)}),c.push(s.random());for(r=e;r-->0;)for(x=e;x-->0;)if(x-r)for(n=9;n-->-8;)for(f=9;f-->-8;)y(r,n,x,f)}();