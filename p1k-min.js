b.style.margin=0,X=b.clientWidth,Y=window.innerHeight-4,c.width=X,c.height=Y,a.translate(X/2,Y/2),a.scale(30,-30),function(){function n(n,o){n.forEach(o)}function o(o,i){a.beginPath(),a.moveTo(o[0].x,o[0].y),n([1,3,2],function(n){a.lineTo(o[n].x,o[n].y)}),a.globalAlpha=.5,a.fillStyle=x[i%r],a.fill()}function i(n,o,i,y){var a=c[n],t=c[i],x={x:(o+u[n])*c[n].x,y:(o+u[n])*c[n].y},f={x:(y+u[i])*c[i].x,y:(y+u[i])*c[i].y},r=-a.y/a.x,s=-r*x.y+x.x,h=-t.x/t.y,l=-h*f.x+f.y,e=(h*s+l)/(1-h*r),p=r*e+s;return{x:p,y:e}}function y(y,a,t,x){var f,s,h,e,p=Array(r),v=i(y,a,t,x),b=[];for(h=0;r>h;h++)0!==c[h].x&&(f=-c[h].y/c[h].x,p[h]=(v.x-f*v.y)/(-f*c[h].y+c[h].x)-u[h]),0!==c[h].y&&(s=-c[h].x/c[h].y,p[h]=(v.y-s*v.x)/(-s*c[h].x+c[h].y)-u[h]),p[h]=l.floor(p[h]);n0s=[a-1,a],n1s=[x-1,x],n(n0s,function(o){n(n1s,function(n){var i=p.slice(0);for(i[y]=o,i[t]=n,e={x:0,y:0},h=0;r>h;h++)e.x+=i[h]*c[h].x,e.y+=i[h]*c[h].y;b.push(e)})}),o(b,y,t)}var t,x=["#b80","#D38","#77C","#3AA","#8A0","#D51","#39D","#E33"],f=[],r=5,c=[],u=[],s=[],h=[],l=Math;for(t=0;r>t;t++){var e=90+t*(360/r),p=e*l.PI/180;f.push(e),c.push({x:-l.sin(p),y:l.cos(p)}),u.push(l.random())}for(t=-5;5>=t;t++)s.push(t);for(t=0;r>t;t++)h.push(t);n(h,function(o){n(h,function(i){i!==o&&n(s,function(a){n(s,function(n){y(o,a,i,n)})})})})}();