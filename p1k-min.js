b.style.margin=0,X=b.clientWidth,Y=window.innerHeight-4,c.width=X,c.height=Y,a.translate(X/2,Y/2),a.scale(30,-30),function(){function n(n,i){n.forEach(i)}function i(n,i,o,a){var y=t[n],r=t[o],x={x:(i+l[n])*t[n].x,y:(i+l[n])*t[n].y},f={x:(a+l[o])*t[o].x,y:(a+l[o])*t[o].y},c=-y.y/y.x,h=-c*x.y+x.x,e=-r.x/r.y,u=-e*f.x+f.y,s=(e*h+u)/(1-e*c),b=c*s+h;return{x:b,y:s}}function o(o,y,x,h){var e,u,s,b,g,p=Array(f),v=i(o,y,x,h),A=[],d=[y-1,y],m=[h-1,h];for(u=0;f>u;u++)s=t[u],s.x||(b=s.y,s.y=s.x,s.x=b),e=-s.y/s.x,p[u]=c.floor((v.x-e*v.y)/(-e*s.y+s.x)-l[u]);n(d,function(i){n(m,function(n){for(p[o]=i,p[x]=n,g={x:0,y:0},u=0;f>u;u++)g.x+=p[u]*t[u].x,g.y+=p[u]*t[u].y;A.push(g)})}),a.beginPath(),a.moveTo(A[0].x,A[0].y),n([1,3,2],function(n){a.lineTo(A[n].x,A[n].y)}),a.globalAlpha=.5,a.fillStyle=r[o%5],a.fill()}var y,r=["#b80","#D38","#77C","#3AA","#8A0"],x=[],f=5,t=[],l=[],c=Math;for(y=f;y-->0;){var h=90+y*(360/f),e=h*c.PI/180;x.push(h),t.push({x:-c.sin(e),y:c.cos(e)}),l.push(c.random())}for(i0=f;i0-->0;)for(i1=f;i1-->0;)if(i1-i0)for(n0=6;n0-->-5;)for(n1=6;n1-->-5;)o(i0,n0,i1,n1)}();