b.style.margin=0,X=b.clientWidth,Y=window.innerHeight-4,c.width=X,c.height=Y,a.translate(X/2,Y/2),a.scale(30,-30),function(){function o(o,a){o.forEach(a)}function r(o,a,r,y){var n=c[o],x=c[r],f={x:(a+u[o])*c[o].x,y:(a+u[o])*c[o].y},i={x:(y+u[r])*c[r].x,y:(y+u[r])*c[r].y},t=-n.y/n.x,l=-t*f.y+f.x,h=-x.x/x.y,e=-h*i.x+i.y,s=(h*l+e)/(1-h*t),b=t*s+l;return{x:b,y:s}}function y(y,n,x,f){var i,t,h,b,g,p,v,A=Array(e),d=r(y,n,x,f),m=[];for(b=0;e>b;b++)g=c[b],g.x||(p=g.y,g.y=g.x,g.x=p),h=-g.y/g.x,A[b]=s.floor((d.x-h*d.y)/(-h*g.y+g.x)-u[b]);for(i=n+1;i-->n-1;)for(t=f+1;t-->f-1;){for(A[y]=i,A[x]=t,v={x:0,y:0},b=e;b-->0;)v.x+=A[b]*c[b].x,v.y+=A[b]*c[b].y;m.push(v)}a.beginPath(),a.moveTo(m[0].x,m[0].y),o([1,3,2],function(o){a.lineTo(m[o].x,m[o].y)}),a.globalAlpha=.5,a.fillStyle=l[y%5],a.fill()}var n,x,f,i,t,l=["#b80","#D38","#77C","#3AA","#8A0"],h=[],e=5,c=[],u=[],s=Math;for(t=e;t-->0;){var b=90+t*(360/e),g=b*s.PI/180;h.push(b),c.push({x:-s.sin(g),y:s.cos(g)}),u.push(s.random())}for(n=e;n-->0;)for(x=e;x-->0;)if(x-n)for(f=6;f-->-5;)for(i=6;i-->-5;)y(n,f,x,i)}();